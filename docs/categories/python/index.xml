<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Python on MatLoverによるMatlab以外のブログ</title><link>https://opqrstuvcut.github.io/categories/python/</link><description>Recent content in Python on MatLoverによるMatlab以外のブログ</description><generator>Hugo</generator><language>ja</language><lastBuildDate>Thu, 31 Jul 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://opqrstuvcut.github.io/categories/python/index.xml" rel="self" type="application/rss+xml"/><item><title>OpenAIのPythonモジュール利用で「Unsupported file format」がでる</title><link>https://opqrstuvcut.github.io/posts/openai%E3%81%AEpython%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%88%A9%E7%94%A8%E3%81%A7unsupported-file-format%E3%81%8C%E3%81%A7%E3%82%8B/</link><pubDate>Thu, 31 Jul 2025 00:00:00 +0000</pubDate><guid>https://opqrstuvcut.github.io/posts/openai%E3%81%AEpython%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%88%A9%E7%94%A8%E3%81%A7unsupported-file-format%E3%81%8C%E3%81%A7%E3%82%8B/</guid><description>&lt;p>下記のように、メモリ上の音声データをBytesIOに書き込み、OpenAIのAPIを実行しようとしました．&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">openai&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">client&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">OpenAI&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">f&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">io&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">BytesIO&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">voice&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">seek&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">transcription&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">audio&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">transcriptions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;gpt-4o-mini-transcribe&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">language&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;ja&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">response_format&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;json&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>この場合、下記のようなエラーが出てしまいます．&lt;/p></description></item><item><title>magma-nvimで理想に近いVimでのJupyter環境を作る</title><link>https://opqrstuvcut.github.io/posts/magma-nvim%E3%81%A7%E7%90%86%E6%83%B3%E3%81%AB%E8%BF%91%E3%81%84vim%E3%81%A7%E3%81%AEjupyter%E7%92%B0%E5%A2%83%E3%82%92%E4%BD%9C%E3%82%8B/</link><pubDate>Mon, 12 Jun 2023 00:00:00 +0000</pubDate><guid>https://opqrstuvcut.github.io/posts/magma-nvim%E3%81%A7%E7%90%86%E6%83%B3%E3%81%AB%E8%BF%91%E3%81%84vim%E3%81%A7%E3%81%AEjupyter%E7%92%B0%E5%A2%83%E3%82%92%E4%BD%9C%E3%82%8B/</guid><description>&lt;p>vimで開発しているとブラウザからJupyterを触るのが嫌になってきます。&lt;/p>
&lt;ul>
&lt;li>開発中にターミナルとブラウザへ移動が面倒&lt;/li>
&lt;li>vimで使っているformatterとかlinterをそのまま使いたい&lt;/li>
&lt;li>Jupyter上でもvimキーバインドを設定しているけど、ブラウザのキーバインドと被る&lt;/li>
&lt;li>vimからIPython上に実行結果を表示する方法もあるが、残念ながらめんどくさかったりで運用面があわない&lt;/li>
&lt;li>PyCharmやVSCodeを使えばいいじゃんという声が聞こえてきますが、とりあえずPyCharmは気になるところが多くて疲れました&amp;hellip;&lt;/li>
&lt;/ul>
&lt;p>前々からvimで完結するようにしたいなぁと思っていたのですが、ようやくそれがある程度実現されてきたので紹介していきます。&lt;/p></description></item><item><title>m3u8ファイルとtsファイルのdownload</title><link>https://opqrstuvcut.github.io/posts/m3u8%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%A8ts%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AEdownload/</link><pubDate>Sun, 31 Jan 2021 00:00:00 +0000</pubDate><guid>https://opqrstuvcut.github.io/posts/m3u8%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%A8ts%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AEdownload/</guid><description>&lt;p>ライブストリーミングや動画の配信するためにm3u8とtsファイルを利用するケースがあります。
tsファイルは細切れになった小さい動画になっており、m3u8ファイルはそれらの情報をもっているプレイリストになります。&lt;/p></description></item><item><title>Sum Treeで重みにそってサンプリングする（Python実装）</title><link>https://opqrstuvcut.github.io/posts/sum-tree%E3%81%A7%E9%87%8D%E3%81%BF%E3%81%AB%E3%81%9D%E3%81%A3%E3%81%A6%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%99%E3%82%8Bpython%E5%AE%9F%E8%A3%85/</link><pubDate>Sun, 17 Jan 2021 00:00:00 +0000</pubDate><guid>https://opqrstuvcut.github.io/posts/sum-tree%E3%81%A7%E9%87%8D%E3%81%BF%E3%81%AB%E3%81%9D%E3%81%A3%E3%81%A6%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%99%E3%82%8Bpython%E5%AE%9F%E8%A3%85/</guid><description>&lt;h1 id="問題設定">問題設定&lt;/h1>
&lt;p>次のような設定でサンプリングをしたいことはよくあると思います。&lt;/p>
&lt;pre tabindex="0">&lt;code>3つのデータがあり、それぞれに重みがつけられているとする。
それぞれ、データ1の重みは10、データ2の重みは20、データ3の重みは30である。
このときに各データの重みと全体の重みの和の比を確率としてサンプリングをしたい。
つまり、データ1は10/60、データ2は20/60、データ3は30/60の確率でサンプリングすることになる。
&lt;/code>&lt;/pre>&lt;h1 id="シンプルな方法">シンプルな方法&lt;/h1>
&lt;p>さきほどの問題設定のとき、簡単にサンプリングする方法は正規化された重みの和を順に足していき、一様分布からサンプリングした乱数がその和を超えたときのデータを取得するという方法です。
手順は次のようになります。&lt;/p></description></item><item><title>Matplotlibの凡例を外側に表示したい人へ</title><link>https://opqrstuvcut.github.io/posts/matplotlib%E3%81%AE%E5%87%A1%E4%BE%8B%E3%82%92%E5%A4%96%E5%81%B4%E3%81%AB%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%9F%E3%81%84%E4%BA%BA%E3%81%B8/</link><pubDate>Mon, 20 Jan 2020 21:09:01 +0900</pubDate><guid>https://opqrstuvcut.github.io/posts/matplotlib%E3%81%AE%E5%87%A1%E4%BE%8B%E3%82%92%E5%A4%96%E5%81%B4%E3%81%AB%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%9F%E3%81%84%E4%BA%BA%E3%81%B8/</guid><description>&lt;p>本記事はQrunchからの転載です。&lt;/p>
&lt;hr>
&lt;p>Matplotlibの凡例を外側に出したい人用に色々な例を書いておきます。&lt;/p>
&lt;p>次のような凡例の位置をいじらずに表示した状態からいじっていきます。&lt;/p></description></item><item><title>Pythonのnamedtupleを使おう</title><link>https://opqrstuvcut.github.io/posts/python%E3%81%AEnamedtuple%E3%82%92%E4%BD%BF%E3%81%8A%E3%81%86/</link><pubDate>Mon, 06 Jan 2020 21:57:05 +0900</pubDate><guid>https://opqrstuvcut.github.io/posts/python%E3%81%AEnamedtuple%E3%82%92%E4%BD%BF%E3%81%8A%E3%81%86/</guid><description>&lt;p>本記事はQrunchからの転載です。&lt;/p>
&lt;hr>
&lt;p>Pythonのnamedtuple使ってますか？
案外使っていない方が多いので、ご紹介しておきます。&lt;/p>
&lt;h1 id="namedtupleとは">namedtupleとは？&lt;/h1>
&lt;p>通常のタプルはインデックス指定でのみ要素を参照します。一方で、NamedTupleはタプルの各要素を&lt;strong>名前&lt;/strong>によって参照できます。&lt;br>
例えばpというnamedtupleの要素にnameというものがあれば、次のようにして参照できます。&lt;/p></description></item></channel></rss>